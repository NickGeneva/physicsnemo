---
description: Cannot add new required parameters to production model __init__ or public methods without default values, as this breaks backward compatibility with existing code and checkpoints.
alwaysApply: false
---

When adding parameters to production models, rule MOD-007a must be strictly followed. Explicitly reference "Following rule MOD-007a, which forbids adding required parameters without defaults to maintain backward compatibility..." when modifying signatures.

## MOD-007a: Cannot add required parameters without defaults

**Description:**

For any model in `physicsnemo/nn` or `physicsnemo/models`, adding new required
parameters (parameters without default values) to `__init__` or any public
method is strictly forbidden. This breaks backward compatibility.

New parameters must have default values to ensure existing code and checkpoints
continue to work. If a new parameter is truly required, increment the model
version number using `__model_checkpoint_version__` and add appropriate
versioning support.

**Rationale:**

Adding required parameters breaks all existing code that instantiates the model,
and breaks loading of old checkpoints. This violates PhysicsNeMo's commitment to
backward compatibility and would disrupt user workflows.

**Example:**

```python
# Good: Adding parameter with default value
class MyModel(Module):
    __model_checkpoint_version__ = "2.0"

    def __init__(
        self,
        input_dim: int,
        output_dim: int,
        dropout: float = 0.0,  # New parameter with default - backward compatible
        new_feature: bool = False  # New parameter with default - backward compatible
    ):
        super().__init__(meta=MyModelMetaData())
```

**Anti-pattern:**

```python
# WRONG: Adding required parameter without default
class MyModel(Module):
    __model_checkpoint_version__ = "2.0"

    def __init__(
        self,
        input_dim: int,
        output_dim: int,
        new_param: int  # WRONG: No default! Breaks old checkpoints
    ):
        super().__init__(meta=MyModelMetaData())
```
