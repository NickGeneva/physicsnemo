---
description: All tensor shapes in docstrings must use LaTeX math notation like :math:`(B, C, H, W)` for proper rendering in Sphinx documentation.
alwaysApply: false
---

When documenting tensor shapes, rule MOD-003e must be followed. Explicitly reference "Following rule MOD-003e, which requires tensor shapes to use LaTeX math notation :math:`...`..." when documenting tensors.

## MOD-003e: Tensor shapes must use LaTeX math notation

**Description:**

All tensors should be documented with their shape, using LaTeX math notation
such as `:math:`(N, C, H_{in}, W_{in})``. There is flexibility for naming the
dimensions, but the math format should be enforced.

Our documentation is rendered using LaTeX, and supports a rich set of LaTeX
commands, so it is recommended to use LaTeX commands whenever possible for
mathematical variables in the docstrings. The mathematical notations should be
to some degree consistent with the actual variable names in the code (even
though that is not always possible, to avoid too complex formatting).

**Rationale:**

LaTeX math notation ensures tensor shapes render correctly and consistently in
Sphinx documentation. This is critical for scientific software where precise
mathematical notation is expected. Plain text shapes don't render properly and
can be ambiguous.

**Example:**

```python
def forward(self, x: torch.Tensor) -> torch.Tensor:
    r"""
    Process input tensor.

    Parameters
    ----------
    x : torch.Tensor
        Input of shape :math:`(B, C, H_{in}, W_{in})` where :math:`B` is batch
        size, :math:`C` is channels, and :math:`H_{in}, W_{in}` are spatial dims.

    Returns
    -------
    torch.Tensor
        Output of shape :math:`(B, C_{out}, H_{out}, W_{out})`.
    """
    pass
```

**Anti-pattern:**

```python
# WRONG: Not using :math: notation
def forward(self, x: torch.Tensor) -> torch.Tensor:
    """
    Parameters
    ----------
    x : torch.Tensor
        Input of shape (B, C, H, W)  # Missing :math:`...`

    Returns
    -------
    torch.Tensor
        Output shape: (B, C_out, H_out, W_out)  # Missing :math:`...`
    """
    pass
```
